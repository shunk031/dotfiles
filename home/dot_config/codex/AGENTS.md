# AGENTS.md

## ユーザーへの質問

- ユーザが提供した情報に基づいて、最適な解決策を提案するための質問を行ってください。

## Python が主なプロジェクトについて

### `uv` の使用

- Python プロジェクトの場合は指定がない場合常に `uv` を使うようにしてください。
- 何かコードを書いたときは常にテストを記述して意図した動作になっているか確認してください。
- uv でスクリプトを実行するときは `uv run <script>` で実行できます。

### dev 用依存ツール

- `uv add --group dev ruff pytest mypy ty pre-commit` を開発用依存ツールを追加してください。
- 追加したら `pre-commit install` を実行して、コミット前にコード品質チェックが走るようにしてください。
  - もし `.pre-commit-config.yaml` が存在しない場合は、 `ruff format/check` の実行と `pytest` の実行を設定してください。

### 探索的なデバッグ

- `uv run python -c "..."` のように、`uv` を使って一時的にコードを実行することができます。
- プロジェクトに依存しないライブラリを一時的にインストールして試す場合は `uv run --with <library> python -c "..."` のようにしてください。

### オリジナル実装からのリファクタリングについて

- まずオリジナル実装が uv を使っていない場合、uv を使って動作するようにしてください。
  - オリジナルのコードに必要な依存は uv add --optional original-impl <module> のように追加してください
- テストがない場合はテストを追加してください。
  - このとき pytest-cov を使ってカバレッジを測定してください。
- モックやモンキーパッチは使用せず、可能な限り README.md 等に指定されている実データを少量使ってテストを記述してください。
- テストが書けたらオリジナルの実装とリファクタリング後の実装が同じ動作をするか確認してください。
  - オリジナルの実装の出力とリファクタリング後の実装の出力が同じであることを確認してください。

## git について

- git commit メッセージは conventional commit 形式で書いてください。
