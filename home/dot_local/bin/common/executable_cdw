#!/usr/bin/env bash

function cdw() {
   # git 内かどうかをチェック
   if ! git rev-parse --is-inside-work-tree &>/dev/null; then
      echo "Not inside a git repository."
      return 1
   fi

   moveto=$(gwq list --json | jq -r 'max_by(.created_at) | .path')
   if [ -z "$moveto" ]; then
      echo "No recent gwq found."
      return 1
   fi
   cd $moveto
}

if [ -n "$($SHELL -c "echo ${ZSH_VERSION}")" ]; then
    cdw
fi
