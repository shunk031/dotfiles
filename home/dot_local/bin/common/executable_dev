#!/usr/bin/env bash

function ghq-path() {
    local path
    path=$(ghq list --full-path | fzf) || return 1
    [[ -n $path ]] || return 1
    printf '%s\n' "$path"
}

function dev() {
    local moveto
    moveto=$(ghq-path) || return 0
    cd -- "$moveto" || exit 1

    # rename session if in tmux
    if [[ -n ${TMUX} ]]; then
        local repo_name
        repo_name="${moveto##*/}"

        tmux rename-session "${repo_name//./-}"
    fi
}

if [ -n "$($SHELL -c "echo ${ZSH_VERSION}")" ]; then
    dev
fi
